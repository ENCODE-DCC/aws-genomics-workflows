# Troubleshooting

The following are some common errors that we have seen and suggested solutions

## S3 Access Denied (403)
### Possible Cause(s)
A 403 error from S3 indicates that Cromwell is trying to access an S3 object
that it doesn't have permission to.
Following the priciple of "least access" Cromwell uses an IAM EC2 instance role
that grants it read and write access to the S3 bucket you specified in the
CloudFormation deployment and read only access to the `gatk-test-data`
and `broad-references` S3 buckets.
If your workflow references other S3 objects (**even ones in your account**)
you will need to allow this via changes to the IAM role. Similarly if a step in
your workflow attempts to write to another bucket you will need to add
the appropriate permissions.

### Suggested Solution(s)

 * Add read access to additional buckets by attaching a policy to the Cromwell
 server's IAM EC2 instance role with content similar to:

```JSON
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::bucket-a",
                "arn:aws:s3:::bucket-a/*",
                "arn:aws:s3:::another-bucket",
                "arn:aws:s3:::another-bucket/*"
            ]
        }
    ]
}
```
The exact name of the role will be unique and generated by CloudFormation,
however it will contain the words "CromwellServer" and it will be the role attached
to the EC2 running the Cromwell server.

## S3 File Not Found (404)

## Possible Cause(s)
A file required by the workflow cannot be found at the
specified S3 Path. Your workflow inputs might have the incorrect path OR an
expected file was not created by the previous step.

### Suggested Solution(s)
* Check the paths of inputs and that the expected file exists at that path.
* If the file name is something like `<previousTaskName>-rc.txt` the previous task
failed before it was able to write out the result code. Inspect the `stderr.txt`
and `stdout.txt` of the previous step for possible reasons.
